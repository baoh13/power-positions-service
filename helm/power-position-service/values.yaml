
# Default values for power-position-service
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  repository: ghcr.io/baoh13/power-position-service
  pullPolicy: IfNotPresent
  tag: "latest"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations: {}

podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
    - ALL
  readOnlyRootFilesystem: false

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 250m
    memory: 256Mi

# Node selector for on-premises deployment
nodeSelector: {}

tolerations: []

affinity: {}

# Power Position Service specific configuration
powerPositionSettings:
  intervalMinutes: 5
  timeZoneId: "Europe/London"
  retryAttempts: 3
  retryDelaySeconds: 20
  maxDlqRetryAttempts: 9

# Storage configuration
storage:
  enabled: true
  # For on-premises: use local-path or nfs storage class
  storageClassName: "local-path"
  
  output:
    size: 10Gi
    # For on-premises Windows host mounting to Linux pods
    # Use hostPath or NFS for actual Windows directory access
    hostPath: ""  # e.g., /mnt/power-reports/output
    
  audit:
    size: 5Gi
    hostPath: ""  # e.g., /mnt/power-reports/audit
  
  dlq:
    size: 2Gi
    hostPath: ""  # e.g., /mnt/power-reports/dlq

# Environment variables for runtime override
env:
  # DOTNET_RUNTIME: ""  # Optional: set for adhoc reruns

# Secrets - API credentials for Power Service SDK
secrets:
  powerServiceApiKey: ""  # Set via --set or values file
  powerServiceUsername: ""
  powerServicePassword: ""

# Logging configuration
logging:
  level: "Information"
  console: true

# Health checks (if implemented)
livenessProbe:
  enabled: false
  httpGet:
    path: /health
    port: 8080
  initialDelaySeconds: 30
  periodSeconds: 10

readinessProbe:
  enabled: false
  httpGet:
    path: /ready
    port: 8080
  initialDelaySeconds: 10
  periodSeconds: 5
